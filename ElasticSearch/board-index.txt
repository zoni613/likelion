PUT /board-index
{
  "settings": {
    //"number_of_shards": 3,  //ìƒ¤ë“œ 3ê°œ
    //"number_of_replicas": 1,  //ë³µì œë³¸ 1ê°œ

    "index.max_ngram_diff": 3, //ì¤‘ê°„ ë¬¸ì ê²€ìƒ‰ì„ ìœ„í•´ ë‹¨ì–´ë¥¼ ìª¼ê°¤ë•Œ ìµœëŒ€ì¹˜ì™€ ìµœì†Œì¹˜ì˜ ê°„ê·¹ ì •ì˜

    "analysis": {                       // ë¬¸ì¥ ë¶„ì„ê¸° ì„¤ì • ì˜ì—­

      "filter": {                        // ğŸ”¹ [1]"filter ì •ì˜ ì˜ì—­" (ë‹¨ì–´ ë‹¨ìœ„ë¡œ ì˜ë¼ë‚¸ í›„ ê·¸ ë‹¨ì–´ë“¤ì„ ì–´ë–»ê²Œ ë³€í˜•í• ì§€ ì •ì˜í•˜ëŠ” ì˜ì—­)

        "autocomplete_filter": {           // ë‚´ê°€ ì •ì˜í•œ filter ì´ë¦„
          "type": "edge_ngram",            //  ì•ì—ì„œë¶€í„° ì˜ê²Œ ìë¦„   ì˜ˆ) ì˜ˆ: "spring" â†’ "s", "sp", "spr", "spri", "sprin", "spring"
          "min_gram": 1,                    // ìµœì†Œ ëª‡ ê¸€ìë¶€í„° ìë¥¼ì§€
          "max_gram": 20                    // ìµœëŒ€ ëª‡ ê¸€ìê¹Œì§€ ìë¥¼ì§€
        },

        //ì¤‘ê°„ ë¬¸ì ê²€ìƒ‰
        "ngram_filter": {
          "type": "ngram", // ë‹¨ì–´ë¥¼  2~5ê¸€ìì”© ì˜ë¼ì„œ ë¶€ë¶„ ë¬¸ìì—´ì„ ë§Œë“¬ (ì•„ë˜ ì •í•œ ìˆ˜ì¹˜ì˜ ê¸€ììˆ˜ ë§Œí¼)
          "min_gram": 2,  // ì˜ˆ) "spring" ->  2ê¸€ì : sp, pr, ri, in, ng   3ê¸€ì : spr, pri, rin, ing
          "max_gram": 5
        },

        //ì´ˆì„±
        "chosung_filter": {
           "type": "hanhinsam_chosung"
        }

      },

      "analyzer": {                        // ì‹¤ì œë¡œ ë¬¸ì¥ì„ ë¶„ì„í•  ë•Œ ì‚¬ìš©í•  ë¶„ì„ê¸°ë¥¼ ì •ì˜í•˜ëŠ” ê³³ (ìœ„ì—ì„œ ì •ì˜í•  í•„í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê³³)

        //ì ‘ë‘ì–´ ê²€ìƒ‰
        "autocomplete_analyzer": {         // ë‚´ê°€ ì •ì˜í•œ ì»¤ìŠ¤í…€ ë¶„ì„ê¸° ì´ë¦„
          "type": "custom",                // ë‚´ê°€ ë§Œë“  ì»¤ìŠ¤í…€ ë¶„ì„ê¸° ì‚¬ìš©
          "tokenizer": "standard",         // ë‹¨ì–´ ë‹¨ìœ„ë¡œ ë¶„ë¦¬  (ê³µë°±, íŠ¹ìˆ˜ë¬¸ì ë“± ê¸°ì¤€ìœ¼ë¡œ ë‹¨ì–´ ë¶„ë¦¬) -> pptì— ì¢…ë¥˜ ìˆìŒ
          "filter": [                       // ğŸ”¸ [2] "ì–´ë–¤ í•„í„°ë“¤ì„ ì‚¬ìš©í• ì§€ ë‚˜ì—´"
            "lowercase",                   // ì†Œë¬¸ìë¡œ í†µì¼
            "autocomplete_filter"         // ìœ„ì—ì„œ ì •ì˜í•œ í•„í„°ë¥¼ ì‚¬ìš© (ì ‘ë‘ì‚¬ ì¡°ê° ìƒì„±)  ì˜ˆ) ì˜ˆ: "spring" â†’ "s", "sp", "spr", "spri", "sprin", "spring"
          ]
        },

        //ì¤‘ê°„ ë¬¸ìì—´ ê²€ìƒ‰
        "ngram_analyzer": {
           "type": "custom",
           "tokenizer": "standard",
           "filter": [
              "lowercase",
              "ngram_filter"
            ]
        },

        //ì´ˆì„± ê²€ìƒ‰
        "chosung_analyzer": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": [
            "chosung_filter"
          ]
        }

      }
    }



  },

  "mappings": {
    "properties": {

      "_class": {                          //spring data elasticsearchì—ì„œ ê°ì²´ë¥¼ ì €ì¥í•  ë•Œ ìë™ìœ¼ë¡œ ì¶”ê°€í•˜ëŠ” ë©”íƒ€ë°ì´í„°
        "type": "keyword",
        "index": false,                   // ğŸ”’ ì €ì¥ì€ ë˜ì§€ë§Œ ê²€ìƒ‰/ì •ë ¬ì—ì„œ ì œì™¸
        "doc_values": false              // ğŸ”’ ì§‘ê³„ì—ë„ ì‚¬ìš© ì•ˆ í•¨
      },

      "content": {

        "type": "text",                     //  âœ… ìì—°ì–´ ë¬¸ì¥ì„ ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” í•„ë“œë¼ëŠ” ì˜ë¯¸    -> pptì— ì¢…ë¥˜ ìˆìŒ
        "analyzer": "autocomplete_analyzer", // âœ… (ì¸ë±ì‹±ìš©)  í…ìŠ¤íŠ¸ë¥¼ ì–´ë–»ê²Œ ìª¼ê°œì„œ ìƒ‰ì¸(ì €ì¥)í• ì§€  (ìœ„ settings -> analysis -> analyzer ì—ì„œ ë§Œë“  ë¶„ì„ê¸° ì‚¬ìš©)
        "search_analyzer": "standard",       // âœ… (ê²€ìƒ‰ìš©)  ê²€ìƒ‰ ì‹œì—ëŠ” ì–´ë–»ê²Œ ë¶„ì„í•´ì„œ ì°¾ì„ì§€   -> pptì— ì¢…ë¥˜ ìˆìŒ


        //ì„œë¸Œ í•„ë“œ (ì„œë¸Œ í•„ë“œëŠ” ì¿¼ë¦¬ì—ì„œ ëª…ì‹œì ìœ¼ë¡œ í•„ë“œëª…ì„ ì§€ì •í•  ë•Œë§Œ ì ìš©ì´ ë¨)
        "fields": {                         //ì—¬ëŸ¬ ë°©ì‹ìœ¼ë¡œ ìƒ‰ì¸/ê²€ìƒ‰í•˜ê³  ì‹¶ì„ ë•Œ ì¶”ê°€ë¡œ ì‚¬ìš©í•˜ëŠ” ì„œë¸Œí•„ë“œ

          "keyword": {                  //ì •í™•íˆ ì¼ì¹˜í•˜ëŠ” ê°’ìœ¼ë¡œ ê²€ìƒ‰
            "type": "keyword",
            "ignore_above": 256          // âœ… 256ì ì´ìƒì¸ ë¬¸ìì—´ì€ ì¸ë±ì‹±í•˜ì§€ ì•Šê² ë‹¤ëŠ” ì„¤ì •  (ì¼ë°˜ì ìœ¼ë¡œ Elasticsearchì˜ ì„±ëŠ¥ ë³´í˜¸ë¥¼ ìœ„í•œ ì œí•œ)
          },


          "chosung": {                        // ì´ˆì„± ê²€ìƒ‰ ì „ìš© í•„ë“œ
            "type": "text",
            "analyzer": "chosung_analyzer"      // âœ… ì´ˆì„±ê²€ìƒ‰
          },


          "ngram": {                        //ì¤‘ê°„ ë¬¸ìì—´ ê²€ìƒ‰
            "type": "text",
            "analyzer": "ngram_analyzer"
          }

        }
      },


      "title": {
        "type": "text",
        "analyzer": "autocomplete_analyzer",
        "search_analyzer": "standard",

        "fields": {

          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          },

          "chosung": {                               // ì´ˆì„± ê²€ìƒ‰ ì „ìš© í•„ë“œ
            "type": "text",
            "analyzer": "chosung_analyzer"
          },

          "ngram": {
            "type": "text",
            "analyzer": "ngram_analyzer"
          }
        }
      },


      "id": {
        "type": "text",                   // âš ï¸ ì›ë˜ëŠ” keywordë¡œ ì“°ëŠ” ê²Œ ë” ì¢‹ìŒ (ì‹ë³„ìë‹ˆê¹Œ)
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },

      "userId": {
        "type": "long"                    // ì‚¬ìš©ì ID (ì •ìˆ˜í˜• í•„í„°/ì •ë ¬ ê°€ëŠ¥)
      },

      "username": {
        "type": "text",                   // ì‚¬ìš©ì ì´ë¦„ (ê²€ìƒ‰ìš©)
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256          // ì •ë ¬/ì§‘ê³„ìš©
          }
        }
      },

      "created_date": {
          "type": "date",
          "format": "yyyy-MM-dd HH:mm:ss.SSSSSS||yyyy-MM-dd HH:mm:ss||strict_date_optional_time||epoch_millis" //ì—¬ëŸ¬ ê°œì˜ í¬ë§· ì¤‘ í•˜ë‚˜ë¼ë„ ë§ìœ¼ë©´ ë‚ ì§œë¡œ ì¸ì‹
      },

      "updated_date": {
          "type": "date",
          "format": "yyyy-MM-dd HH:mm:ss.SSSSSS||yyyy-MM-dd HH:mm:ss||strict_date_optional_time||epoch_millis"
      },
      "view_count" : {
        "type" : "long"
      }

    }
  }
}


